[
    {
        "id": "ba5dcfac39603564",
        "type": "tab",
        "label": "Configuration",
        "disabled": false,
        "info": "Contains all nodes that need to be configured by the enduser."
    },
    {
        "id": "5fffdd7bd03e62e5",
        "type": "tab",
        "label": "DoorAssistant",
        "disabled": false,
        "info": ""
    },
    {
        "id": "790abfecdef18970",
        "type": "tab",
        "label": "Dashboard",
        "disabled": false,
        "info": "Contains all Dashboard nodes as well as the actions taken when they are updated"
    },
    {
        "id": "372db699749e8d7d",
        "type": "tab",
        "label": "Debug",
        "disabled": false,
        "info": ""
    },
    {
        "id": "8c3a0fe6168eb6b2",
        "type": "ui_tab",
        "name": "Konfiguration",
        "icon": "dashboard",
        "disabled": false,
        "hidden": false
    },
    {
        "id": "8e5d5e3048f6984c",
        "type": "ui_base",
        "theme": {
            "name": "theme-light",
            "lightTheme": {
                "default": "#0094CE",
                "baseColor": "#2260c3",
                "baseFont": "Georgia,Georgia,serif",
                "edited": true,
                "reset": false
            },
            "darkTheme": {
                "default": "#097479",
                "baseColor": "#097479",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "edited": false
            },
            "customTheme": {
                "name": "Untitled Theme 1",
                "default": "#4B7930",
                "baseColor": "#4B7930",
                "baseFont": "-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Oxygen-Sans,Ubuntu,Cantarell,Helvetica Neue,sans-serif",
                "reset": false
            },
            "themeState": {
                "base-color": {
                    "default": "#0094CE",
                    "value": "#2260c3",
                    "edited": true
                },
                "page-titlebar-backgroundColor": {
                    "value": "#2260c3",
                    "edited": false
                },
                "page-backgroundColor": {
                    "value": "#fafafa",
                    "edited": false
                },
                "page-sidebar-backgroundColor": {
                    "value": "#333333",
                    "edited": false
                },
                "group-textColor": {
                    "value": "#5188e1",
                    "edited": false
                },
                "group-borderColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "group-backgroundColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "widget-textColor": {
                    "value": "#111111",
                    "edited": false
                },
                "widget-backgroundColor": {
                    "value": "#2260c3",
                    "edited": false
                },
                "widget-borderColor": {
                    "value": "#ffffff",
                    "edited": false
                },
                "base-font": {
                    "value": "Georgia,Georgia,serif"
                }
            },
            "angularTheme": {
                "primary": "indigo",
                "accents": "blue",
                "warn": "red",
                "background": "grey",
                "palette": "light"
            }
        },
        "site": {
            "name": "DoorAssistant Dashboard",
            "hideToolbar": "false",
            "allowSwipe": "false",
            "lockMenu": "true",
            "allowTempTheme": "true",
            "dateFormat": "DD.MM.YYYY",
            "sizes": {
                "sx": 48,
                "sy": 48,
                "gx": 6,
                "gy": 6,
                "cx": 6,
                "cy": 6,
                "px": 3,
                "py": 3
            }
        }
    },
    {
        "id": "f6471c0a62158f36",
        "type": "ui_group",
        "name": "Klingel",
        "tab": "8c3a0fe6168eb6b2",
        "order": 1,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "08607024c7e3ecad",
        "type": "ui_group",
        "name": "Detector - Briefkasten",
        "tab": "8c3a0fe6168eb6b2",
        "order": 3,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "4f1ab8464bc5464e",
        "type": "ui_group",
        "name": "Detector - Haustür",
        "tab": "8c3a0fe6168eb6b2",
        "order": 2,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "71a8f076f9291d03",
        "type": "ui_tab",
        "name": "Historie",
        "icon": "grid_on",
        "disabled": false,
        "hidden": false
    },
    {
        "id": "242479a4a77e0476",
        "type": "ui_group",
        "name": "MainGroup",
        "tab": "71a8f076f9291d03",
        "order": 1,
        "disp": false,
        "width": "18",
        "collapse": false
    },
    {
        "id": "6bccc9f8e5419fdf",
        "type": "mqtt-broker",
        "name": "localhost MQTT broker",
        "broker": "localhost",
        "port": "1883",
        "clientid": "",
        "usetls": false,
        "protocolVersion": "4",
        "keepalive": "60",
        "cleansession": true,
        "birthTopic": "",
        "birthQos": "0",
        "birthPayload": "",
        "birthMsg": {},
        "closeTopic": "",
        "closeQos": "0",
        "closePayload": "",
        "closeMsg": {},
        "willTopic": "",
        "willQos": "0",
        "willPayload": "",
        "willMsg": {},
        "sessionExpiry": ""
    },
    {
        "id": "dfb9b9ca7a860aee",
        "type": "telegram bot",
        "botname": "UOLSoftSkills_bot",
        "usernames": "HagenTest",
        "chatids": "",
        "baseapiurl": "",
        "updatemode": "polling",
        "pollinterval": "300",
        "usesocks": false,
        "sockshost": "",
        "socksport": "6667",
        "socksusername": "anonymous",
        "sockspassword": "",
        "bothost": "",
        "botpath": "",
        "localbotport": "8443",
        "publicbotport": "8443",
        "privatekey": "",
        "certificate": "",
        "useselfsignedcertificate": false,
        "sslterminated": false,
        "verboselogging": false
    },
    {
        "id": "cc5f1e88b5c6cfeb",
        "type": "ui_spacer",
        "z": "790abfecdef18970",
        "name": "spacer",
        "group": "f6471c0a62158f36",
        "order": 6,
        "width": "9",
        "height": 1
    },
    {
        "id": "0b2a1642d8ba7d50",
        "type": "ui_group",
        "name": "Misc",
        "tab": "8c3a0fe6168eb6b2",
        "order": 4,
        "disp": true,
        "width": "6",
        "collapse": false
    },
    {
        "id": "99e56507398a372c",
        "type": "ui_spacer",
        "z": "790abfecdef18970",
        "name": "spacer",
        "group": "242479a4a77e0476",
        "order": 4,
        "width": "4",
        "height": 1
    },
    {
        "id": "ed8fd5bd585420aa",
        "type": "ui_spacer",
        "z": "790abfecdef18970",
        "name": "spacer",
        "group": "242479a4a77e0476",
        "order": 8,
        "width": "6",
        "height": 1
    },
    {
        "id": "084e87768c60b552",
        "type": "ui_spacer",
        "z": "790abfecdef18970",
        "name": "spacer",
        "group": "242479a4a77e0476",
        "order": 6,
        "width": 1,
        "height": 1
    },
    {
        "id": "e5347124b3ddb7fb",
        "type": "ui_spacer",
        "z": "790abfecdef18970",
        "name": "spacer",
        "group": "242479a4a77e0476",
        "order": 1,
        "width": "18",
        "height": 1
    },
    {
        "id": "b12ce2fb2f16f8a4",
        "type": "ui_spacer",
        "z": "790abfecdef18970",
        "name": "spacer",
        "group": "242479a4a77e0476",
        "order": 10,
        "width": "18",
        "height": 1
    },
    {
        "id": "1ca46b4d48400149",
        "type": "ui_spacer",
        "z": "790abfecdef18970",
        "name": "spacer",
        "group": "242479a4a77e0476",
        "order": 2,
        "width": 1,
        "height": 1
    },
    {
        "id": "256e7266680380a8",
        "type": "discord-token",
        "name": "DoorAssistantBot"
    },
    {
        "id": "9c67be281362cd0c",
        "type": "mqtt out",
        "z": "372db699749e8d7d",
        "name": "",
        "topic": "/DoorAssistant/Klingel/Press",
        "qos": "",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "6bccc9f8e5419fdf",
        "x": 420,
        "y": 80,
        "wires": []
    },
    {
        "id": "eeb7047aa53bb681",
        "type": "inject",
        "z": "372db699749e8d7d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "Pressed",
        "payloadType": "str",
        "x": 200,
        "y": 80,
        "wires": [
            [
                "9c67be281362cd0c"
            ]
        ]
    },
    {
        "id": "f76c6b19923d9eb1",
        "type": "mqtt out",
        "z": "372db699749e8d7d",
        "name": "",
        "topic": "/DoorAssistant/Briefkasten/Detected",
        "qos": "2",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "6bccc9f8e5419fdf",
        "x": 450,
        "y": 140,
        "wires": []
    },
    {
        "id": "925bb2e78820c2c0",
        "type": "inject",
        "z": "372db699749e8d7d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "MQTT IN 2",
        "payloadType": "str",
        "x": 200,
        "y": 140,
        "wires": [
            [
                "f76c6b19923d9eb1"
            ]
        ]
    },
    {
        "id": "569ea312758d097c",
        "type": "mqtt out",
        "z": "372db699749e8d7d",
        "name": "",
        "topic": "/DoorAssistant/Klin22gel/Settin",
        "qos": "2",
        "retain": "",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "6bccc9f8e5419fdf",
        "x": 430,
        "y": 240,
        "wires": []
    },
    {
        "id": "e8504b3da6850cc4",
        "type": "inject",
        "z": "372db699749e8d7d",
        "name": "",
        "props": [
            {
                "p": "payload"
            },
            {
                "p": "topic",
                "vt": "str"
            }
        ],
        "repeat": "",
        "crontab": "",
        "once": false,
        "onceDelay": 0.1,
        "topic": "",
        "payload": "MQTT IN 3",
        "payloadType": "str",
        "x": 200,
        "y": 240,
        "wires": [
            [
                "569ea312758d097c"
            ]
        ]
    },
    {
        "id": "08d5d3b223e1af86",
        "type": "mqtt in",
        "z": "5fffdd7bd03e62e5",
        "name": "MQTT RECEIVER",
        "topic": "/DoorAssistant/#",
        "qos": "2",
        "datatype": "auto",
        "broker": "6bccc9f8e5419fdf",
        "nl": false,
        "rap": true,
        "rh": 0,
        "x": 150,
        "y": 620,
        "wires": [
            [
                "067fe98f6691059c"
            ]
        ]
    },
    {
        "id": "067fe98f6691059c",
        "type": "switch",
        "z": "5fffdd7bd03e62e5",
        "name": "topic-SWITCH",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "/DoorAssistant/Klingel",
                "vt": "str"
            },
            {
                "t": "cont",
                "v": "/DoorAssistant/Briefkasten",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 3,
        "x": 360,
        "y": 620,
        "wires": [
            [
                "4002428cebcdc6b2"
            ],
            [
                "5ad77385a7cb7f0e"
            ],
            [
                "8226624aabd5304c"
            ]
        ]
    },
    {
        "id": "5ad77385a7cb7f0e",
        "type": "switch",
        "z": "5fffdd7bd03e62e5",
        "name": "BRIEFKASTEN",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "cont",
                "v": "/DoorAssistant/Briefkasten/Detected",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 600,
        "y": 840,
        "wires": [
            [
                "6feb46805eac59c9"
            ],
            [
                "85b25059f6f16227"
            ]
        ]
    },
    {
        "id": "4002428cebcdc6b2",
        "type": "switch",
        "z": "5fffdd7bd03e62e5",
        "name": "KLINGEL",
        "property": "topic",
        "propertyType": "msg",
        "rules": [
            {
                "t": "eq",
                "v": "/DoorAssistant/Klingel/Press",
                "vt": "str"
            },
            {
                "t": "else"
            }
        ],
        "checkall": "true",
        "repair": false,
        "outputs": 2,
        "x": 600,
        "y": 440,
        "wires": [
            [
                "e8f29149066f87f4"
            ],
            [
                "9c60fdbfb32214d1"
            ]
        ]
    },
    {
        "id": "9c60fdbfb32214d1",
        "type": "function",
        "z": "5fffdd7bd03e62e5",
        "name": "CATCHALL",
        "func": "node.warn(\"Received Invalid payload ( \" + msg.payload + \") at topic \" + msg.topic);\nreturn null;",
        "outputs": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 790,
        "y": 580,
        "wires": [],
        "icon": "font-awesome/fa-exclamation-triangle"
    },
    {
        "id": "85b25059f6f16227",
        "type": "function",
        "z": "5fffdd7bd03e62e5",
        "name": "CATCHALL",
        "func": "node.warn(\"Received Invalid payload ( \" + msg.payload + \") at topic \" + msg.topic);\nreturn null;",
        "outputs": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 830,
        "y": 1020,
        "wires": [],
        "icon": "font-awesome/fa-warning"
    },
    {
        "id": "8226624aabd5304c",
        "type": "function",
        "z": "5fffdd7bd03e62e5",
        "name": "CATCHALL",
        "func": "node.warn(\"Received Invalid payload ( \" + msg.payload + \") at topic \" + msg.topic);\nreturn null;",
        "outputs": 0,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 550,
        "y": 980,
        "wires": [],
        "icon": "font-awesome/fa-warning"
    },
    {
        "id": "7890b33b97cbd6a5",
        "type": "speakerpi-output",
        "z": "5fffdd7bd03e62e5",
        "choose": "givenfile",
        "filename": "/home/pi/police_s.wav",
        "channels": "1",
        "bitdepth": "16",
        "samplerate": "22050",
        "name": "SPEAKER",
        "x": 1370,
        "y": 300,
        "wires": [
            []
        ]
    },
    {
        "id": "9d99a3159b10648f",
        "type": "rpi-gpio in",
        "z": "5fffdd7bd03e62e5",
        "name": "GPIO DOOR DETECTOR",
        "pin": "18",
        "intype": "tri",
        "debounce": "25",
        "read": false,
        "x": 150,
        "y": 1240,
        "wires": [
            [
                "af782fe8082faa51"
            ]
        ]
    },
    {
        "id": "e8f29149066f87f4",
        "type": "function",
        "z": "5fffdd7bd03e62e5",
        "name": "Enable-GATE",
        "func": "var enabled = context.get(\"status\");\n\nif(msg.topic === \"klingelEnableSwitch\"){\n    enabled = msg.payload;\n    context.set(\"status\", msg.payload);\n    \n    return null; //no message on state change\n}else{\n    if(enabled){\n        return msg; //passthrough button press\n    }\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is started.\n\ncontext.set(\"status\", false);",
        "finalize": "",
        "libs": [],
        "x": 800,
        "y": 380,
        "wires": [
            [
                "29bba17caca2abd1",
                "20bc9963bd38cecd",
                "3d6014238e34a9f7"
            ]
        ],
        "icon": "font-awesome/fa-question"
    },
    {
        "id": "29bba17caca2abd1",
        "type": "function",
        "z": "5fffdd7bd03e62e5",
        "name": "Audio-GATE",
        "func": "var enabled = context.get(\"status\");\n\nif(msg.topic === \"klingelAudioSwitch\"){\n    enabled = msg.payload;\n    context.set(\"status\", msg.payload);\n    \n    return null; //no message on state change\n}else{\n    if(enabled){\n        return msg; //passthrough button press\n    }\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is started.\n\ncontext.set(\"status\", false);",
        "finalize": "",
        "libs": [],
        "x": 1150,
        "y": 300,
        "wires": [
            [
                "7890b33b97cbd6a5"
            ]
        ],
        "icon": "font-awesome/fa-question"
    },
    {
        "id": "20bc9963bd38cecd",
        "type": "function",
        "z": "5fffdd7bd03e62e5",
        "name": "Messenger-GATE",
        "func": "var enabled = context.get(\"status\");\n\nif(msg.topic === \"klingelMessengerSwitch\"){\n    enabled = msg.payload;\n    context.set(\"status\", msg.payload);\n    \n    return null; //no message on state change\n}else{\n    if(enabled){\n        return msg; //passthrough button press\n    }\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is started.\n\ncontext.set(\"status\", false);",
        "finalize": "",
        "libs": [],
        "x": 1170,
        "y": 380,
        "wires": [
            [
                "8485826340d0c228"
            ]
        ],
        "icon": "font-awesome/fa-question"
    },
    {
        "id": "3d6014238e34a9f7",
        "type": "function",
        "z": "5fffdd7bd03e62e5",
        "name": "History-GATE",
        "func": "var enabled = context.get(\"status\");\n\nif(msg.topic === \"klingelHistorySwitch\"){\n    enabled = msg.payload;\n    context.set(\"status\", msg.payload);\n    \n    return null; //no message on state change\n}else{\n    if(enabled){\n        return msg; //passthrough button press\n    }\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is started.\n\ncontext.set(\"status\", false);",
        "finalize": "",
        "libs": [],
        "x": 1160,
        "y": 440,
        "wires": [
            [
                "44935e930c8ee088"
            ]
        ],
        "icon": "font-awesome/fa-question"
    },
    {
        "id": "6feb46805eac59c9",
        "type": "function",
        "z": "5fffdd7bd03e62e5",
        "name": "Enable-GATE",
        "func": "var enabled = context.get(\"status\");\n\nif(msg.topic === \"briefkastenEnableSwitch\"){\n    enabled = msg.payload;\n    context.set(\"status\", msg.payload);\n    \n    return null; //no message on state change\n}else{\n    if(enabled){\n        return msg; //passthrough button press\n    }\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is started.\n\ncontext.set(\"status\", false);",
        "finalize": "",
        "libs": [],
        "x": 840,
        "y": 820,
        "wires": [
            [
                "f734139f51182b01",
                "a8f13040b0acdf98",
                "0f2dc082c6d61e52"
            ]
        ],
        "icon": "font-awesome/fa-question"
    },
    {
        "id": "f734139f51182b01",
        "type": "function",
        "z": "5fffdd7bd03e62e5",
        "name": "Audio-GATE",
        "func": "var enabled = context.get(\"status\");\n\nif(msg.topic === \"briefkastenAudioSwitch\"){\n    enabled = msg.payload;\n    context.set(\"status\", msg.payload);\n    \n    return null; //no message on state change\n}else{\n    if(enabled){\n        return msg; //passthrough button press\n    }\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is started.\n\ncontext.set(\"status\", false);",
        "finalize": "",
        "libs": [],
        "x": 1150,
        "y": 700,
        "wires": [
            [
                "beb2781250a79020"
            ]
        ],
        "icon": "font-awesome/fa-question"
    },
    {
        "id": "a8f13040b0acdf98",
        "type": "function",
        "z": "5fffdd7bd03e62e5",
        "name": "Messenger-GATE",
        "func": "var enabled = context.get(\"status\");\n\nif(msg.topic === \"briefkastenMessengerSwitch\"){\n    enabled = msg.payload;\n    context.set(\"status\", msg.payload);\n    \n    return null; //no message on state change\n}else{\n    if(enabled){\n        return msg; //passthrough button press\n    }\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is started.\n\ncontext.set(\"status\", false);",
        "finalize": "",
        "libs": [],
        "x": 1170,
        "y": 820,
        "wires": [
            [
                "6a0a653e5f2091c6"
            ]
        ],
        "icon": "font-awesome/fa-question"
    },
    {
        "id": "0f2dc082c6d61e52",
        "type": "function",
        "z": "5fffdd7bd03e62e5",
        "name": "History-GATE",
        "func": "var enabled = context.get(\"status\");\n\nif(msg.topic === \"briefkastenHistorySwitch\"){\n    enabled = msg.payload;\n    context.set(\"status\", msg.payload);\n    \n    return null; //no message on state change\n}else{\n    if(enabled){\n        return msg; //passthrough button press\n    }\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is started.\n\ncontext.set(\"status\", false);",
        "finalize": "",
        "libs": [],
        "x": 1160,
        "y": 900,
        "wires": [
            [
                "9e225189340365af"
            ]
        ],
        "icon": "font-awesome/fa-question"
    },
    {
        "id": "beb2781250a79020",
        "type": "speakerpi-output",
        "z": "5fffdd7bd03e62e5",
        "choose": "givenfile",
        "filename": "/home/pi/police_s.wav",
        "channels": "1",
        "bitdepth": "16",
        "samplerate": "22050",
        "name": "SPEAKER",
        "x": 1370,
        "y": 700,
        "wires": [
            []
        ]
    },
    {
        "id": "af782fe8082faa51",
        "type": "function",
        "z": "5fffdd7bd03e62e5",
        "name": "DetectChange",
        "func": "if(msg.payload === context.get(\"lastInput\")){\n    //do nothing\n}else{\n    //if(Date.now() - context.get(\"lastChange\") > 5000){//detect change every 5 seconds\n        context.set(\"lastInput\", msg.payload);//change 1->0, 0->1\n        //context.set(\"lastChange\", Date.now());\n        return msg;//pass on any message\n    //}\n}\nreturn null;\n\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is started.\ncontext.set(\"lastInput\", 0);\n//context.set(\"lastChange\", 0);",
        "finalize": "",
        "libs": [],
        "x": 420,
        "y": 1240,
        "wires": [
            [
                "173705713ad1bcc8"
            ]
        ]
    },
    {
        "id": "b6cdac6183b572d4",
        "type": "ui_slider",
        "z": "790abfecdef18970",
        "name": "",
        "label": "Klingel Intervall",
        "tooltip": "Zeit, die zwischen zwei mal Klingeln mindestens vergehen muss",
        "group": "f6471c0a62158f36",
        "order": 5,
        "width": "6",
        "height": "1",
        "passthru": false,
        "outs": "end",
        "topic": "topic",
        "topicType": "str",
        "min": "1",
        "max": "60",
        "step": 1,
        "x": 240,
        "y": 280,
        "wires": [
            [
                "e5396a270c3c2297"
            ]
        ]
    },
    {
        "id": "e5396a270c3c2297",
        "type": "mqtt out",
        "z": "790abfecdef18970",
        "name": "Update Klingel MinInterval",
        "topic": "/DoorAssistant/Klingel/Settings/MinInterval",
        "qos": "2",
        "retain": "true",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "6bccc9f8e5419fdf",
        "x": 470,
        "y": 280,
        "wires": []
    },
    {
        "id": "f05e1201011d7b9a",
        "type": "ui_switch",
        "z": "790abfecdef18970",
        "name": "KlingelAudioSwitch",
        "label": "Audio-Signal",
        "tooltip": "Spielt einen Sound auf dem Raspberry-Pi ab",
        "group": "f6471c0a62158f36",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "false",
        "topic": "klingelAudioSwitch",
        "topicType": "str",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "notifications",
        "oncolor": "GREEN",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "notifications_off",
        "offcolor": "RED",
        "animate": false,
        "x": 230,
        "y": 100,
        "wires": [
            [
                "644018c6b599b222"
            ]
        ]
    },
    {
        "id": "644018c6b599b222",
        "type": "link out",
        "z": "790abfecdef18970",
        "name": "klingelAudioSwitch",
        "links": [
            "5bd71f31abc73c65"
        ],
        "x": 375,
        "y": 100,
        "wires": []
    },
    {
        "id": "5bd71f31abc73c65",
        "type": "link in",
        "z": "5fffdd7bd03e62e5",
        "name": "klingelAudioIn",
        "links": [
            "644018c6b599b222"
        ],
        "x": 1035,
        "y": 280,
        "wires": [
            [
                "29bba17caca2abd1"
            ]
        ],
        "icon": "font-awesome/fa-bell"
    },
    {
        "id": "fb2259e72576cdf9",
        "type": "ui_switch",
        "z": "790abfecdef18970",
        "name": "KlingelEnableSwitch",
        "label": "Aktiv",
        "tooltip": "Aktiviere oder deaktivere ALLE Klingel-Funktionen",
        "group": "f6471c0a62158f36",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "false",
        "topic": "klingelEnableSwitch",
        "topicType": "str",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "settings_power",
        "oncolor": "GREEN",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "settings_power",
        "offcolor": "RED",
        "animate": false,
        "x": 220,
        "y": 40,
        "wires": [
            [
                "8d9d6a1089ae81a1"
            ]
        ]
    },
    {
        "id": "8d9d6a1089ae81a1",
        "type": "link out",
        "z": "790abfecdef18970",
        "name": "klingelEnableSwitch",
        "links": [
            "f5edcdfc1b892d2e"
        ],
        "x": 375,
        "y": 40,
        "wires": []
    },
    {
        "id": "f5edcdfc1b892d2e",
        "type": "link in",
        "z": "5fffdd7bd03e62e5",
        "name": "klingelEnableIn",
        "links": [
            "8d9d6a1089ae81a1"
        ],
        "x": 655,
        "y": 380,
        "wires": [
            [
                "e8f29149066f87f4"
            ]
        ],
        "icon": "font-awesome/fa-bell"
    },
    {
        "id": "d1704d7e764241e3",
        "type": "ui_switch",
        "z": "790abfecdef18970",
        "name": "KlingelMessengerSwitch",
        "label": "Messenger-Nachricht",
        "tooltip": "Versende Benachrichtung per eingestelltem Messenger-Dienst",
        "group": "f6471c0a62158f36",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "false",
        "topic": "klingelMessengerSwitch",
        "topicType": "str",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "chat",
        "oncolor": "GREEN",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "chat_bubble_outline",
        "offcolor": "RED",
        "animate": false,
        "x": 210,
        "y": 160,
        "wires": [
            [
                "d736f1829a3d8565"
            ]
        ]
    },
    {
        "id": "d736f1829a3d8565",
        "type": "link out",
        "z": "790abfecdef18970",
        "name": "klingelMessengerSwitch",
        "links": [
            "80847de70f541784"
        ],
        "x": 375,
        "y": 160,
        "wires": []
    },
    {
        "id": "80847de70f541784",
        "type": "link in",
        "z": "5fffdd7bd03e62e5",
        "name": "klingelMessengerIn",
        "links": [
            "d736f1829a3d8565"
        ],
        "x": 1035,
        "y": 360,
        "wires": [
            [
                "20bc9963bd38cecd"
            ]
        ],
        "icon": "font-awesome/fa-bell"
    },
    {
        "id": "f7619582f84dcfaa",
        "type": "ui_switch",
        "z": "790abfecdef18970",
        "name": "KlingelHistorieSwitch",
        "label": "Schreibe in Historie",
        "tooltip": "Schreibe Klingeln in Historientabelle",
        "group": "f6471c0a62158f36",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "false",
        "topic": "klingelHistorySwitch",
        "topicType": "str",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "grid_on",
        "oncolor": "GREEN",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "grid_off",
        "offcolor": "RED",
        "animate": false,
        "x": 220,
        "y": 220,
        "wires": [
            [
                "0cfb7d8af64066cc"
            ]
        ]
    },
    {
        "id": "0cfb7d8af64066cc",
        "type": "link out",
        "z": "790abfecdef18970",
        "name": "klingelHistorieSwitch",
        "links": [
            "a8addc971e126709"
        ],
        "x": 375,
        "y": 220,
        "wires": []
    },
    {
        "id": "a8addc971e126709",
        "type": "link in",
        "z": "5fffdd7bd03e62e5",
        "name": "klingelHistorieIn",
        "links": [
            "0cfb7d8af64066cc"
        ],
        "x": 1035,
        "y": 480,
        "wires": [
            [
                "3d6014238e34a9f7"
            ]
        ],
        "icon": "font-awesome/fa-bell"
    },
    {
        "id": "400c2a8b379635cc",
        "type": "ui_switch",
        "z": "790abfecdef18970",
        "name": "DoorDetectorAudioSwitch",
        "label": "Audio-Signal",
        "tooltip": "Spielt einen Sound auf dem Raspberry-Pi ab",
        "group": "4f1ab8464bc5464e",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "false",
        "topic": "doorAudioSwitch",
        "topicType": "str",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "notifications",
        "oncolor": "GREEN",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "notifications_off",
        "offcolor": "RED",
        "animate": false,
        "x": 1170,
        "y": 100,
        "wires": [
            [
                "29b2dbcc4d059759"
            ]
        ]
    },
    {
        "id": "24d2f2733022abe1",
        "type": "ui_switch",
        "z": "790abfecdef18970",
        "name": "DoorDetectorMessengerSwitch",
        "label": "Messenger-Nachricht",
        "tooltip": "Versende Benachrichtung per eingestelltem Messenger-Dienst",
        "group": "4f1ab8464bc5464e",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "false",
        "topic": "doorMessengerSwitch",
        "topicType": "str",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "chat",
        "oncolor": "GREEN",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "chat_bubble_outline",
        "offcolor": "RED",
        "animate": false,
        "x": 1150,
        "y": 160,
        "wires": [
            [
                "5f082bfe75093f2b"
            ]
        ]
    },
    {
        "id": "7ee0595a96d9dff2",
        "type": "ui_switch",
        "z": "790abfecdef18970",
        "name": "DoorDetectorHistorieSwitch",
        "label": "Schreibe in Historie",
        "tooltip": "Schreibe Klingeln in Historientabelle",
        "group": "4f1ab8464bc5464e",
        "order": 4,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "false",
        "topic": "doorHistorySwitch",
        "topicType": "str",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "grid_on",
        "oncolor": "GREEN",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "grid_off",
        "offcolor": "RED",
        "animate": false,
        "x": 1160,
        "y": 220,
        "wires": [
            [
                "ca0f93010716db9b"
            ]
        ]
    },
    {
        "id": "9ff247663cbcd4aa",
        "type": "ui_switch",
        "z": "790abfecdef18970",
        "name": "DoorDetectorEnableSwitch",
        "label": "Aktiv",
        "tooltip": "Aktiviere oder deaktivere ALLE HaustürDetector-Funktionen",
        "group": "4f1ab8464bc5464e",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "false",
        "topic": "doorEnableSwitch",
        "topicType": "str",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "settings_power",
        "oncolor": "GREEN",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "settings_power",
        "offcolor": "RED",
        "animate": false,
        "x": 1160,
        "y": 40,
        "wires": [
            [
                "47de2dbf6ad48895"
            ]
        ]
    },
    {
        "id": "c8b356f1d9181828",
        "type": "ui_slider",
        "z": "790abfecdef18970",
        "name": "DisplayEnableLengthSlider",
        "label": "Display Anzeige Dauer",
        "tooltip": "Wie lange das Display der Klingel angeschaltet sein soll, wenn Nachrichten angezeigt werden (Sekunden)",
        "group": "f6471c0a62158f36",
        "order": 8,
        "width": 0,
        "height": 0,
        "passthru": true,
        "outs": "end",
        "topic": "topic",
        "topicType": "msg",
        "min": "20",
        "max": "120",
        "step": "5",
        "x": 200,
        "y": 400,
        "wires": [
            [
                "19e4a7b0d1aeaafe"
            ]
        ]
    },
    {
        "id": "b444e3f6382097cc",
        "type": "ui_switch",
        "z": "790abfecdef18970",
        "name": "DisplayEnableSwitch",
        "label": "Display Aktiviert",
        "tooltip": "Aktiviere oder Deaktiviere das gesamte Display",
        "group": "f6471c0a62158f36",
        "order": 7,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "false",
        "topic": "topic",
        "topicType": "msg",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "settings_power",
        "oncolor": "GREEN",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "settings_power",
        "offcolor": "RED",
        "animate": true,
        "x": 220,
        "y": 340,
        "wires": [
            [
                "73a320b62e9dea12"
            ]
        ]
    },
    {
        "id": "0eaa81b6bfe5deed",
        "type": "ui_template",
        "z": "790abfecdef18970",
        "group": "242479a4a77e0476",
        "name": "Tabelle",
        "order": 7,
        "width": "18",
        "height": "16",
        "format": "<!-- Style Source: https://johnsardine.com/freebies/dl-html-css/simple-little-tab/ (Modified) -->\n<style>\ntable {\n\tfont-family: Arial, Helvetica, sans-serif;\n\tcolor: #666;\n\tfont-size: 16px;\n\ttext-shadow: 1px 1px 0px #fff;\n\tbackground: #eaebec;\n\tmargin: 20px;\n\tborder: #ccc 1px solid;\n\n\t-moz-border-radius: 3px;\n\t-webkit-border-radius: 3px;\n\tborder-radius: 3px;\n\n\t-moz-box-shadow: 0 1px 2px #d1d1d1;\n\t-webkit-box-shadow: 0 1px 2px #d1d1d1;\n\tbox-shadow: 0 1px 2px #d1d1d1;\n}\ntable th {\n\tpadding: 21px 25px 22px 25px;\n\tborder-top: 1px solid #fafafa;\n\tborder-bottom: 1px solid #e0e0e0;\n\n\tbackground: #ededed;\n\tbackground: -webkit-gradient(linear, left top, left bottom, from(#ededed), to(#ebebeb));\n\tbackground: -moz-linear-gradient(top,  #ededed,  #ebebeb);\n}\ntable th:first-child {\n\ttext-align: left;\n\tpadding-left: 20px;\n}\ntable tr:first-child th:first-child {\n\t-moz-border-radius-topleft: 3px;\n\t-webkit-border-top-left-radius: 3px;\n\tborder-top-left-radius: 3px;\n}\ntable tr:first-child th:last-child {\n\t-moz-border-radius-topright: 3px;\n\t-webkit-border-top-right-radius: 3px;\n\tborder-top-right-radius: 3px;\n}\ntable tr {\n\ttext-align: center;\n\tpadding-left: 20px;\n}\ntable td:first-child {\n\ttext-align: left;\n\tpadding-left: 20px;\n\tborder-left: 0;\n}\ntable td {\n\tpadding: 9px;\n\tborder-top: 1px solid #ffffff;\n\tborder-bottom: 1px solid #e0e0e0;\n\tborder-left: 1px solid #e0e0e0;\n\n\tbackground: #fafafa;\n\tbackground: -webkit-gradient(linear, left top, left bottom, from(#fbfbfb), to(#fafafa));\n\tbackground: -moz-linear-gradient(top,  #fbfbfb,  #fafafa);\n}\ntable tr.even td {\n\tbackground: #f6f6f6;\n\tbackground: -webkit-gradient(linear, left top, left bottom, from(#f8f8f8), to(#f6f6f6));\n\tbackground: -moz-linear-gradient(top,  #f8f8f8,  #f6f6f6);\n}\ntable tr:last-child td {\n\tborder-bottom: 0;\n}\ntable tr:last-child td:first-child {\n\t-moz-border-radius-bottomleft: 3px;\n\t-webkit-border-bottom-left-radius: 3px;\n\tborder-bottom-left-radius: 3px;\n}\ntable tr:last-child td:last-child {\n\t-moz-border-radius-bottomright: 3px;\n\t-webkit-border-bottom-right-radius: 3px;\n\tborder-bottom-right-radius: 3px;\n}\ntable tr:hover td {\n\tbackground: #f2f2f2;\n\tbackground: -webkit-gradient(linear, left top, left bottom, from(#f2f2f2), to(#f0f0f0));\n\tbackground: -moz-linear-gradient(top,  #f2f2f2,  #f0f0f0);\t\n}\n</style>\n\n<table>\n    <tr>\n        <th>Zeit</th>\n        <th>Event</th>\n    </tr>\n    <tr ng-repeat=\"payload in msg.payload\">\n        <td>{{payload.time}}</td>\n        <td>{{payload.event}}</td>\n    </tr>\n</table>",
        "storeOutMessages": true,
        "fwdInMessages": true,
        "resendOnRefresh": true,
        "templateScope": "local",
        "x": 1160,
        "y": 1020,
        "wires": [
            []
        ]
    },
    {
        "id": "19e4a7b0d1aeaafe",
        "type": "mqtt out",
        "z": "790abfecdef18970",
        "name": "Update Klingel Display OnTime",
        "topic": "/DoorAssistant/Klingel/Settings/DisplayDuration",
        "qos": "2",
        "retain": "true",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "6bccc9f8e5419fdf",
        "x": 490,
        "y": 400,
        "wires": []
    },
    {
        "id": "73a320b62e9dea12",
        "type": "mqtt out",
        "z": "790abfecdef18970",
        "name": "Update Klingel Display Enable",
        "topic": "/DoorAssistant/Klingel/Settings/DisplayEnable",
        "qos": "2",
        "retain": "true",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "6bccc9f8e5419fdf",
        "x": 490,
        "y": 340,
        "wires": []
    },
    {
        "id": "47de2dbf6ad48895",
        "type": "link out",
        "z": "790abfecdef18970",
        "name": "doorEnableSwitch",
        "links": [
            "585f6814eea559bf"
        ],
        "x": 1335,
        "y": 40,
        "wires": []
    },
    {
        "id": "29b2dbcc4d059759",
        "type": "link out",
        "z": "790abfecdef18970",
        "name": "doorAudioSwitch",
        "links": [
            "ef1123285df745e1"
        ],
        "x": 1335,
        "y": 100,
        "wires": []
    },
    {
        "id": "5f082bfe75093f2b",
        "type": "link out",
        "z": "790abfecdef18970",
        "name": "doorMessengerSwitch",
        "links": [
            "cc5ac32caaa815b8"
        ],
        "x": 1335,
        "y": 160,
        "wires": []
    },
    {
        "id": "ca0f93010716db9b",
        "type": "link out",
        "z": "790abfecdef18970",
        "name": "doorHistorieSwitch",
        "links": [
            "a13a23de5b110c44"
        ],
        "x": 1335,
        "y": 220,
        "wires": []
    },
    {
        "id": "f2deebfd255d5619",
        "type": "ui_switch",
        "z": "790abfecdef18970",
        "name": "BriefkastenDetectorEnableSwitch",
        "label": "Aktiv",
        "tooltip": "Aktiviere oder deaktivere ALLE BriefkastenDetector-Funktionen",
        "group": "08607024c7e3ecad",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "false",
        "topic": "briefkastenEnableSwitch",
        "topicType": "str",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "settings_power",
        "oncolor": "GREEN",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "settings_power",
        "offcolor": "RED",
        "animate": false,
        "x": 180,
        "y": 580,
        "wires": [
            [
                "60640ff60d24fd33"
            ]
        ]
    },
    {
        "id": "16c27ad7e552fd44",
        "type": "ui_switch",
        "z": "790abfecdef18970",
        "name": "BriefkastenDetectorAudioSwitch",
        "label": "Audio-Signal",
        "tooltip": "Spielt einen Sound auf dem Raspberry-Pi ab",
        "group": "08607024c7e3ecad",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "false",
        "topic": "briefkastenAudioSwitch",
        "topicType": "str",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "notifications",
        "oncolor": "GREEN",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "notifications_off",
        "offcolor": "RED",
        "animate": false,
        "x": 190,
        "y": 640,
        "wires": [
            [
                "a2742713705af42c"
            ]
        ]
    },
    {
        "id": "803f237d91d17217",
        "type": "ui_switch",
        "z": "790abfecdef18970",
        "name": "BriefkastenDetectorMessengerSwitch",
        "label": "Messenger-Nachricht",
        "tooltip": "Versende Benachrichtung per eingestelltem Messenger-Dienst",
        "group": "08607024c7e3ecad",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "false",
        "topic": "briefkastenMessengerSwitch",
        "topicType": "str",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "chat",
        "oncolor": "GREEN",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "chat_bubble_outline",
        "offcolor": "RED",
        "animate": false,
        "x": 170,
        "y": 700,
        "wires": [
            [
                "cc705cb6057cf485"
            ]
        ]
    },
    {
        "id": "c7c80280031918dc",
        "type": "ui_switch",
        "z": "790abfecdef18970",
        "name": "BriefkastenDetectorHistorieSwitch",
        "label": "Schreibe in Historie",
        "tooltip": "Schreibe Klingeln in Historientabelle",
        "group": "08607024c7e3ecad",
        "order": 5,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "false",
        "topic": "briefkastenHistorySwitch",
        "topicType": "str",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "grid_on",
        "oncolor": "GREEN",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "grid_off",
        "offcolor": "RED",
        "animate": false,
        "x": 180,
        "y": 760,
        "wires": [
            [
                "b282835131ee2fea"
            ]
        ]
    },
    {
        "id": "60640ff60d24fd33",
        "type": "link out",
        "z": "790abfecdef18970",
        "name": "briefkastenEnableSwitch",
        "links": [
            "0f7f890419aa8be4"
        ],
        "x": 375,
        "y": 580,
        "wires": []
    },
    {
        "id": "a2742713705af42c",
        "type": "link out",
        "z": "790abfecdef18970",
        "name": "briefkastenAudioSwitch",
        "links": [
            "1ef7d43815058e9e"
        ],
        "x": 375,
        "y": 640,
        "wires": []
    },
    {
        "id": "cc705cb6057cf485",
        "type": "link out",
        "z": "790abfecdef18970",
        "name": "briefkastenMessengerSwitch",
        "links": [
            "8d3d05a98b3dc658"
        ],
        "x": 375,
        "y": 700,
        "wires": []
    },
    {
        "id": "b282835131ee2fea",
        "type": "link out",
        "z": "790abfecdef18970",
        "name": "briefkastenHistorieSwitch",
        "links": [
            "649c786e2904d6c1"
        ],
        "x": 375,
        "y": 760,
        "wires": []
    },
    {
        "id": "0f7f890419aa8be4",
        "type": "link in",
        "z": "5fffdd7bd03e62e5",
        "name": "briefkastenEnableIn",
        "links": [
            "60640ff60d24fd33"
        ],
        "x": 695,
        "y": 780,
        "wires": [
            [
                "6feb46805eac59c9"
            ]
        ],
        "icon": "node-red/envelope.svg"
    },
    {
        "id": "1ef7d43815058e9e",
        "type": "link in",
        "z": "5fffdd7bd03e62e5",
        "name": "briefkastenAudioIn",
        "links": [
            "a2742713705af42c"
        ],
        "x": 1015,
        "y": 680,
        "wires": [
            [
                "f734139f51182b01"
            ]
        ],
        "icon": "node-red/envelope.svg"
    },
    {
        "id": "8d3d05a98b3dc658",
        "type": "link in",
        "z": "5fffdd7bd03e62e5",
        "name": "briefkastenMessengerIn",
        "links": [
            "cc705cb6057cf485"
        ],
        "x": 1015,
        "y": 780,
        "wires": [
            [
                "a8f13040b0acdf98"
            ]
        ],
        "icon": "node-red/envelope.svg"
    },
    {
        "id": "649c786e2904d6c1",
        "type": "link in",
        "z": "5fffdd7bd03e62e5",
        "name": "briefkastenHistorieIn",
        "links": [
            "b282835131ee2fea"
        ],
        "x": 1015,
        "y": 940,
        "wires": [
            [
                "0f2dc082c6d61e52"
            ]
        ],
        "icon": "node-red/envelope.svg"
    },
    {
        "id": "43db9962062a2063",
        "type": "function",
        "z": "5fffdd7bd03e62e5",
        "name": "Stringify",
        "func": "if (msg.payload == 0){\n    return {\n        \"topic\": \"doorOpened\",\n        \"payload\": global.get(\"str_door_open\")\n    };\n}\n\nif(msg.payload == 1){\n    return {\n        \"topic\": \"doorClosed\",\n        \"payload\": global.get(\"str_door_close\")\n    };\n}\n\nreturn null;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 800,
        "y": 1240,
        "wires": [
            [
                "6fe5e37a4acfdc7e"
            ]
        ]
    },
    {
        "id": "6fe5e37a4acfdc7e",
        "type": "function",
        "z": "5fffdd7bd03e62e5",
        "name": "Enable-GATE",
        "func": "var enabled = context.get(\"status\");\n\nif(msg.topic === \"doorEnableSwitch\"){\n    enabled = msg.payload;\n    context.set(\"status\", msg.payload);\n    \n    return null; //no message on state change\n}else{\n    if(enabled){\n        return msg; //passthrough button press\n    }\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is started.\n\ncontext.set(\"status\", false);",
        "finalize": "",
        "libs": [],
        "x": 1060,
        "y": 1240,
        "wires": [
            [
                "61390f33bd79e486",
                "5cd0595af3821963",
                "376611d0f7d4fee1"
            ]
        ],
        "icon": "font-awesome/fa-question"
    },
    {
        "id": "61390f33bd79e486",
        "type": "function",
        "z": "5fffdd7bd03e62e5",
        "name": "Audio-GATE",
        "func": "var enabled = context.get(\"status\");\n\nif(msg.topic === \"doorAudioSwitch\"){\n    enabled = msg.payload;\n    context.set(\"status\", msg.payload);\n    \n    return null; //no message on state change\n}else{\n    if(enabled){\n        return msg; //passthrough button press\n    }\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is started.\n\ncontext.set(\"status\", false);",
        "finalize": "",
        "libs": [],
        "x": 1370,
        "y": 1120,
        "wires": [
            [
                "0a4ffccf64f101f7"
            ]
        ],
        "icon": "font-awesome/fa-question"
    },
    {
        "id": "5cd0595af3821963",
        "type": "function",
        "z": "5fffdd7bd03e62e5",
        "name": "Messenger-GATE",
        "func": "var enabled = context.get(\"status\");\n\nif(msg.topic === \"doorMessengerSwitch\"){\n    enabled = msg.payload;\n    context.set(\"status\", msg.payload);\n    \n    return null; //no message on state change\n}else{\n    if(enabled){\n        return msg;\n    }\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is started.\n\ncontext.set(\"status\", false);",
        "finalize": "",
        "libs": [],
        "x": 1390,
        "y": 1240,
        "wires": [
            [
                "31fe2e2bc14acccf"
            ]
        ],
        "icon": "font-awesome/fa-question"
    },
    {
        "id": "376611d0f7d4fee1",
        "type": "function",
        "z": "5fffdd7bd03e62e5",
        "name": "History-GATE",
        "func": "var enabled = context.get(\"status\");\n\nif(msg.topic === \"doorHistorySwitch\"){\n    enabled = msg.payload;\n    context.set(\"status\", msg.payload);\n    \n    return null; //no message on state change\n}else{\n    if(enabled){\n        return msg; //passthrough button press\n    }\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is started.\n\ncontext.set(\"status\", false);",
        "finalize": "",
        "libs": [],
        "x": 1380,
        "y": 1320,
        "wires": [
            [
                "65b09596f5839e79"
            ]
        ],
        "icon": "font-awesome/fa-question"
    },
    {
        "id": "0a4ffccf64f101f7",
        "type": "speakerpi-output",
        "z": "5fffdd7bd03e62e5",
        "choose": "givenfile",
        "filename": "/home/pi/police_s.wav",
        "channels": "1",
        "bitdepth": "16",
        "samplerate": "22050",
        "name": "SPEAKER",
        "x": 1590,
        "y": 1120,
        "wires": [
            []
        ]
    },
    {
        "id": "585f6814eea559bf",
        "type": "link in",
        "z": "5fffdd7bd03e62e5",
        "name": "briefkastenEnableIn",
        "links": [
            "47de2dbf6ad48895"
        ],
        "x": 915,
        "y": 1200,
        "wires": [
            [
                "6fe5e37a4acfdc7e"
            ]
        ]
    },
    {
        "id": "ef1123285df745e1",
        "type": "link in",
        "z": "5fffdd7bd03e62e5",
        "name": "doorAudioIn",
        "links": [
            "29b2dbcc4d059759"
        ],
        "x": 1235,
        "y": 1100,
        "wires": [
            [
                "61390f33bd79e486"
            ]
        ]
    },
    {
        "id": "cc5ac32caaa815b8",
        "type": "link in",
        "z": "5fffdd7bd03e62e5",
        "name": "doorMessengerIn",
        "links": [
            "5f082bfe75093f2b"
        ],
        "x": 1235,
        "y": 1200,
        "wires": [
            [
                "5cd0595af3821963"
            ]
        ]
    },
    {
        "id": "a13a23de5b110c44",
        "type": "link in",
        "z": "5fffdd7bd03e62e5",
        "name": "doorHistorieIn",
        "links": [
            "ca0f93010716db9b"
        ],
        "x": 1235,
        "y": 1360,
        "wires": [
            [
                "376611d0f7d4fee1"
            ]
        ]
    },
    {
        "id": "26aab2278f22add8",
        "type": "ui_switch",
        "z": "790abfecdef18970",
        "name": "telegramMessengerSwitch",
        "label": "Nachrichten via Telegram",
        "tooltip": "",
        "group": "0b2a1642d8ba7d50",
        "order": 1,
        "width": 0,
        "height": 0,
        "passthru": false,
        "decouple": "false",
        "topic": "telegramMessengerSwitch",
        "topicType": "str",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "settings_power",
        "oncolor": "GREEN",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "settings_power",
        "offcolor": "RED",
        "animate": false,
        "x": 1160,
        "y": 580,
        "wires": [
            [
                "c2891a686e28fa4f"
            ]
        ]
    },
    {
        "id": "082b4a8e13ded938",
        "type": "ui_switch",
        "z": "790abfecdef18970",
        "name": "discordMessengerSwitch",
        "label": "Nachrichten via Discord",
        "tooltip": "",
        "group": "0b2a1642d8ba7d50",
        "order": 3,
        "width": 0,
        "height": 0,
        "passthru": true,
        "decouple": "false",
        "topic": "discordMessengerEnable",
        "topicType": "str",
        "style": "",
        "onvalue": "true",
        "onvalueType": "bool",
        "onicon": "settings_power",
        "oncolor": "GREEN",
        "offvalue": "false",
        "offvalueType": "bool",
        "officon": "settings_power",
        "offcolor": "RED",
        "animate": false,
        "x": 1170,
        "y": 700,
        "wires": [
            [
                "c23c8a2f155c3670"
            ]
        ]
    },
    {
        "id": "c2891a686e28fa4f",
        "type": "link out",
        "z": "790abfecdef18970",
        "name": "telegramMessengerSwitch",
        "links": [
            "f5c6a9b5fd4b3bf3"
        ],
        "x": 1335,
        "y": 580,
        "wires": []
    },
    {
        "id": "c23c8a2f155c3670",
        "type": "link out",
        "z": "790abfecdef18970",
        "name": "discordMessengerSwitch",
        "links": [
            "1a24b10105213548"
        ],
        "x": 1335,
        "y": 700,
        "wires": []
    },
    {
        "id": "26f37dff5cc92e0b",
        "type": "ui_text_input",
        "z": "790abfecdef18970",
        "name": "",
        "label": "Telegram ChatID",
        "tooltip": "Chat ID, an die Nachrichten gesendet werden sollen",
        "group": "0b2a1642d8ba7d50",
        "order": 2,
        "width": 0,
        "height": 0,
        "passthru": true,
        "mode": "text",
        "delay": 300,
        "topic": "telegramChatID",
        "topicType": "str",
        "x": 1190,
        "y": 640,
        "wires": [
            [
                "30dc402447fc0e9c"
            ]
        ]
    },
    {
        "id": "30dc402447fc0e9c",
        "type": "link out",
        "z": "790abfecdef18970",
        "name": "telegramChatIdText",
        "links": [],
        "x": 1335,
        "y": 640,
        "wires": []
    },
    {
        "id": "468443440e961e5b",
        "type": "link in",
        "z": "ba5dcfac39603564",
        "name": "telegramMessageIn",
        "links": [
            "72d01adebf564f53"
        ],
        "x": 175,
        "y": 160,
        "wires": [
            [
                "d46aa19a32a5f182"
            ]
        ],
        "icon": "node-red-contrib-telegrambot/telegram.png"
    },
    {
        "id": "d31aa4e5e1ac6cf3",
        "type": "ui_button",
        "z": "790abfecdef18970",
        "name": "",
        "group": "242479a4a77e0476",
        "order": 9,
        "width": "6",
        "height": "1",
        "passthru": false,
        "label": "Historientabelle leeren",
        "tooltip": "Entfernt alle Einträge aus der Historientabelle",
        "color": "",
        "bgcolor": "RED",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "clearHistoryTable",
        "topicType": "str",
        "x": 220,
        "y": 1140,
        "wires": [
            [
                "2d0b6a8593da97ba",
                "5469a38f601d1639"
            ]
        ]
    },
    {
        "id": "e7d8863c33ef1892",
        "type": "file",
        "z": "790abfecdef18970",
        "name": "",
        "filename": "data/history.csv",
        "appendNewline": false,
        "createDir": true,
        "overwriteFile": "true",
        "encoding": "none",
        "x": 660,
        "y": 1140,
        "wires": [
            []
        ]
    },
    {
        "id": "0e61818e60a01d7a",
        "type": "file",
        "z": "5fffdd7bd03e62e5",
        "name": "",
        "filename": "data/history.csv",
        "appendNewline": true,
        "createDir": true,
        "overwriteFile": "false",
        "encoding": "none",
        "x": 680,
        "y": 40,
        "wires": [
            []
        ]
    },
    {
        "id": "7c22380ab366641f",
        "type": "function",
        "z": "5fffdd7bd03e62e5",
        "name": "toCSV",
        "func": "var csvString = new Date().toLocaleString('de-DE', { day: '2-digit', month: '2-digit', year: 'numeric', hour: '2-digit', hour12: false, minute: '2-digit' }) + \";\" + msg.payload;\n\nreturn {\n    \"topic\": msg.topic,\n    \"payload\": csvString\n};",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 510,
        "y": 40,
        "wires": [
            [
                "0e61818e60a01d7a"
            ]
        ]
    },
    {
        "id": "65b09596f5839e79",
        "type": "link out",
        "z": "5fffdd7bd03e62e5",
        "name": "doorDetectorHistoryOut",
        "links": [
            "c853688828545376"
        ],
        "x": 1535,
        "y": 1320,
        "wires": []
    },
    {
        "id": "d9fbb63c087dfa51",
        "type": "link out",
        "z": "5fffdd7bd03e62e5",
        "name": "briefkastenHistoryOut",
        "links": [
            "c853688828545376"
        ],
        "x": 1515,
        "y": 900,
        "wires": [],
        "icon": "node-red/envelope.svg"
    },
    {
        "id": "5b0d329d8646851c",
        "type": "link out",
        "z": "5fffdd7bd03e62e5",
        "name": "klingelHistoryOut",
        "links": [
            "c853688828545376"
        ],
        "x": 1515,
        "y": 440,
        "wires": [],
        "icon": "font-awesome/fa-bell"
    },
    {
        "id": "c853688828545376",
        "type": "link in",
        "z": "5fffdd7bd03e62e5",
        "name": "historyWriteIn",
        "links": [
            "5b0d329d8646851c",
            "65b09596f5839e79",
            "d9fbb63c087dfa51"
        ],
        "x": 395,
        "y": 40,
        "wires": [
            [
                "7c22380ab366641f"
            ]
        ]
    },
    {
        "id": "16478c2ffad568fd",
        "type": "comment",
        "z": "5fffdd7bd03e62e5",
        "name": "WRITE TO HISTORY",
        "info": "",
        "x": 240,
        "y": 40,
        "wires": []
    },
    {
        "id": "44935e930c8ee088",
        "type": "change",
        "z": "5fffdd7bd03e62e5",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "str_klingel",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1380,
        "y": 440,
        "wires": [
            [
                "5b0d329d8646851c"
            ]
        ]
    },
    {
        "id": "9e225189340365af",
        "type": "change",
        "z": "5fffdd7bd03e62e5",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "str_post",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1380,
        "y": 900,
        "wires": [
            [
                "d9fbb63c087dfa51"
            ]
        ]
    },
    {
        "id": "8c66266df0899c07",
        "type": "comment",
        "z": "5fffdd7bd03e62e5",
        "name": "SEND MESSENGER NOTIFICATION",
        "info": "",
        "x": 190,
        "y": 200,
        "wires": []
    },
    {
        "id": "40c21b881be6c224",
        "type": "link in",
        "z": "5fffdd7bd03e62e5",
        "name": "messengerNotificationIn",
        "links": [
            "ef4cb9e64f588b24",
            "94cd65d7a55bccf8",
            "31fe2e2bc14acccf"
        ],
        "x": 395,
        "y": 200,
        "wires": [
            [
                "1198f724c1a02a92",
                "9fbff776d88c45cd"
            ]
        ]
    },
    {
        "id": "1198f724c1a02a92",
        "type": "function",
        "z": "5fffdd7bd03e62e5",
        "name": "Telegram-GATE",
        "func": "var enabled = context.get(\"status\");\n\nif(msg.topic === \"telegramMessengerSwitch\"){\n    enabled = msg.payload;\n    context.set(\"status\", msg.payload);\n    \n    return null; //no message on state change\n}else{\n    if(enabled){\n        return msg; //passthrough button press\n    }\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is started.\n\ncontext.set(\"status\", false);",
        "finalize": "",
        "libs": [],
        "x": 560,
        "y": 160,
        "wires": [
            [
                "72d01adebf564f53"
            ]
        ],
        "icon": "font-awesome/fa-question"
    },
    {
        "id": "f5c6a9b5fd4b3bf3",
        "type": "link in",
        "z": "5fffdd7bd03e62e5",
        "name": "telegramMessengerSwitchIn",
        "links": [
            "c2891a686e28fa4f"
        ],
        "x": 395,
        "y": 140,
        "wires": [
            [
                "1198f724c1a02a92"
            ]
        ],
        "icon": "node-red-contrib-telegrambot/telegram.png"
    },
    {
        "id": "72d01adebf564f53",
        "type": "link out",
        "z": "5fffdd7bd03e62e5",
        "name": "telegramMessageOut",
        "links": [
            "468443440e961e5b"
        ],
        "x": 695,
        "y": 160,
        "wires": [],
        "icon": "node-red-contrib-telegrambot/telegram.png"
    },
    {
        "id": "9fbff776d88c45cd",
        "type": "function",
        "z": "5fffdd7bd03e62e5",
        "name": "Discord-GATE",
        "func": "var enabled = context.get(\"status\");\n\nif(msg.topic === \"discordMessengerEnable\"){\n    enabled = msg.payload;\n    context.set(\"status\", msg.payload);\n    \n    return null; //no message on state change\n}else{\n    if(enabled){\n        return msg; //passthrough button press\n    }\n}\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is started.\n\ncontext.set(\"status\", false);",
        "finalize": "",
        "libs": [],
        "x": 560,
        "y": 240,
        "wires": [
            [
                "ba3e1fb0bc7ddbda"
            ]
        ],
        "icon": "font-awesome/fa-question"
    },
    {
        "id": "1a24b10105213548",
        "type": "link in",
        "z": "5fffdd7bd03e62e5",
        "name": "discordMessengerSwitchIn",
        "links": [
            "c23c8a2f155c3670"
        ],
        "x": 395,
        "y": 260,
        "wires": [
            [
                "9fbff776d88c45cd"
            ]
        ],
        "icon": "node-red-contrib-discord/discord.png"
    },
    {
        "id": "df488d69b84db929",
        "type": "link in",
        "z": "ba5dcfac39603564",
        "name": "discordMessageIn",
        "links": [
            "ba3e1fb0bc7ddbda"
        ],
        "x": 315,
        "y": 460,
        "wires": [
            [
                "b068750d4e5a0cea"
            ]
        ],
        "icon": "node-red-contrib-discord/discord.png"
    },
    {
        "id": "ba3e1fb0bc7ddbda",
        "type": "link out",
        "z": "5fffdd7bd03e62e5",
        "name": "discordMessageOut",
        "links": [
            "df488d69b84db929"
        ],
        "x": 695,
        "y": 240,
        "wires": [],
        "icon": "node-red-contrib-discord/discord.png"
    },
    {
        "id": "ef4cb9e64f588b24",
        "type": "link out",
        "z": "5fffdd7bd03e62e5",
        "name": "briefkastenMessengerOut",
        "links": [
            "40c21b881be6c224"
        ],
        "x": 1515,
        "y": 820,
        "wires": [],
        "icon": "node-red/envelope.svg"
    },
    {
        "id": "94cd65d7a55bccf8",
        "type": "link out",
        "z": "5fffdd7bd03e62e5",
        "name": "klingelMessengerOut",
        "links": [
            "40c21b881be6c224"
        ],
        "x": 1515,
        "y": 380,
        "wires": [],
        "icon": "font-awesome/fa-bell"
    },
    {
        "id": "31fe2e2bc14acccf",
        "type": "link out",
        "z": "5fffdd7bd03e62e5",
        "name": "doorMessengerOut",
        "links": [
            "40c21b881be6c224"
        ],
        "x": 1535,
        "y": 1240,
        "wires": []
    },
    {
        "id": "fcc9738b264a3222",
        "type": "telegram sender",
        "z": "ba5dcfac39603564",
        "name": "[!] Telegram Sender",
        "bot": "dfb9b9ca7a860aee",
        "haserroroutput": false,
        "outputs": 1,
        "x": 630,
        "y": 160,
        "wires": [
            []
        ]
    },
    {
        "id": "d46aa19a32a5f182",
        "type": "function",
        "z": "ba5dcfac39603564",
        "name": "[!] Configure Telegram ChatID",
        "func": "// CHANGE ME:\nvar chatId = \"1955069403\";\n\nreturn {\n    \"topic\": msg.topic,\n    \"payload\": {\n        \"chatId\": chatId,\n        \"type\": \"message\",\n        \"content\": msg.payload\n    }\n};",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 160,
        "wires": [
            [
                "fcc9738b264a3222"
            ]
        ],
        "icon": "node-red/alert.svg"
    },
    {
        "id": "8485826340d0c228",
        "type": "change",
        "z": "5fffdd7bd03e62e5",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "str_klingel",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1380,
        "y": 380,
        "wires": [
            [
                "94cd65d7a55bccf8"
            ]
        ]
    },
    {
        "id": "6a0a653e5f2091c6",
        "type": "change",
        "z": "5fffdd7bd03e62e5",
        "name": "",
        "rules": [
            {
                "t": "set",
                "p": "payload",
                "pt": "msg",
                "to": "str_post",
                "tot": "global"
            }
        ],
        "action": "",
        "property": "",
        "from": "",
        "to": "",
        "reg": false,
        "x": 1380,
        "y": 820,
        "wires": [
            [
                "ef4cb9e64f588b24"
            ]
        ]
    },
    {
        "id": "63a514814d774029",
        "type": "telegram receiver",
        "z": "ba5dcfac39603564",
        "name": "[!] Telegram Receiver",
        "bot": "dfb9b9ca7a860aee",
        "saveDataDir": "",
        "filterCommands": false,
        "x": 180,
        "y": 220,
        "wires": [
            [
                "be3749174f8c08c4"
            ],
            []
        ]
    },
    {
        "id": "be3749174f8c08c4",
        "type": "function",
        "z": "ba5dcfac39603564",
        "name": "handleMessage",
        "func": "//Out1: Telegram Message, Out2: MQTT Send to display\nvar DISPLAY_SIZE = 2 * 16;\n\nif(msg.payload.content === \"/start\" || msg.payload.content === \"/info\"){\n    return [{\n        \"topic\": \"sendTelegramMessage\",\n        \"payload\": {\n            \"chatId\": msg.payload.chatId,\n            \"type\": \"message\",\n            \"content\": \"ChatID: \" + msg.payload.chatId\n        }\n    }, null];\n}\n\nif(msg.payload.content.startsWith(\"/send \")){\n    var text = msg.payload.content.replace(\"/send \", \"\");\n    \n    if(text.length <= DISPLAY_SIZE){\n        return [{\n            \"topic\": \"sendTelegramMessage\",\n            \"payload\": {\n                \"chatId\": msg.payload.chatId,\n                \"type\": \"message\",\n                \"content\": \"Nachricht an Display geschickt.\"\n            }\n        },\n        {\n            \"topic\": \"sendMQTTMessage\",\n            \"payload\": text\n        }];\n    }\n    \n    return [{\n        \"topic\": \"sendTelegramMessage\",\n            \"payload\": {\n                \"chatId\": msg.payload.chatId,\n                \"type\": \"message\",\n                \"content\": \"Nachricht zu lang, maximal \" + DISPLAY_SIZE + \" Zeichen.\"\n            }\n    }, null];\n    \n}\n\nreturn null;",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 400,
        "y": 220,
        "wires": [
            [
                "fcc9738b264a3222"
            ],
            [
                "df1d2302dc2ca7fd"
            ]
        ],
        "icon": "node-red-contrib-telegrambot/telegram.png"
    },
    {
        "id": "414742986b80161c",
        "type": "file in",
        "z": "790abfecdef18970",
        "name": "",
        "filename": "data/history.csv",
        "format": "utf8",
        "chunk": false,
        "sendError": false,
        "encoding": "none",
        "allProps": false,
        "x": 680,
        "y": 1020,
        "wires": [
            [
                "84e42233d4d1726d"
            ]
        ]
    },
    {
        "id": "84e42233d4d1726d",
        "type": "csv",
        "z": "790abfecdef18970",
        "name": "",
        "sep": ";",
        "hdrin": "",
        "hdrout": "none",
        "multi": "mult",
        "ret": "\\n",
        "temp": "time,event",
        "skip": "0",
        "strings": true,
        "include_empty_strings": "",
        "include_null_values": "",
        "x": 850,
        "y": 1020,
        "wires": [
            [
                "3978547a309e55df"
            ]
        ]
    },
    {
        "id": "f05a5ca3ab300458",
        "type": "ui_button",
        "z": "790abfecdef18970",
        "name": "",
        "group": "242479a4a77e0476",
        "order": 5,
        "width": "6",
        "height": "1",
        "passthru": false,
        "label": "Load",
        "tooltip": "Lade Historiendaten",
        "color": "",
        "bgcolor": "GREEN",
        "icon": "",
        "payload": "",
        "payloadType": "str",
        "topic": "topic",
        "topicType": "msg",
        "x": 270,
        "y": 1020,
        "wires": [
            [
                "414742986b80161c"
            ]
        ]
    },
    {
        "id": "2756db9460ba7d36",
        "type": "ui_text",
        "z": "790abfecdef18970",
        "group": "242479a4a77e0476",
        "order": 3,
        "width": "6",
        "height": "1",
        "name": "",
        "label": "<h3>Event-Historie</h3>",
        "format": "",
        "layout": "row-center",
        "x": 210,
        "y": 960,
        "wires": []
    },
    {
        "id": "2d0b6a8593da97ba",
        "type": "delay",
        "z": "790abfecdef18970",
        "name": "",
        "pauseType": "delay",
        "timeout": "250",
        "timeoutUnits": "milliseconds",
        "rate": "1",
        "nbRateUnits": "1",
        "rateUnits": "second",
        "randomFirst": "1",
        "randomLast": "5",
        "randomUnits": "seconds",
        "drop": false,
        "allowrate": false,
        "x": 450,
        "y": 1080,
        "wires": [
            [
                "414742986b80161c"
            ]
        ]
    },
    {
        "id": "5469a38f601d1639",
        "type": "function",
        "z": "790abfecdef18970",
        "name": "emptyPayload",
        "func": "msg.payload = \"\";\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 460,
        "y": 1140,
        "wires": [
            [
                "e7d8863c33ef1892"
            ]
        ]
    },
    {
        "id": "121e48714f68dec4",
        "type": "ui_slider",
        "z": "790abfecdef18970",
        "name": "DoorDetectionIntervall",
        "label": "Detection Intervall",
        "tooltip": "Zeit, die zwischen zwei mal Türöffnen mindestens vergehen muss",
        "group": "4f1ab8464bc5464e",
        "order": 5,
        "width": "6",
        "height": "1",
        "passthru": false,
        "outs": "end",
        "topic": "doorIntervalSwitch",
        "topicType": "str",
        "min": "1",
        "max": "60",
        "step": 1,
        "x": 1180,
        "y": 280,
        "wires": [
            [
                "466b41fb04881228"
            ]
        ]
    },
    {
        "id": "0f07ae176e54d3bb",
        "type": "ui_slider",
        "z": "790abfecdef18970",
        "name": "BriefkastenDetectionIntervall",
        "label": "Detection Intervall",
        "tooltip": "Zeit, die zwischen zwei Briefmeldungen mindestens vergehen muss",
        "group": "08607024c7e3ecad",
        "order": 5,
        "width": "6",
        "height": "1",
        "passthru": false,
        "outs": "end",
        "topic": "topic",
        "topicType": "str",
        "min": "1",
        "max": "60",
        "step": 1,
        "x": 200,
        "y": 820,
        "wires": [
            [
                "eb7250ddd659db77"
            ]
        ]
    },
    {
        "id": "eb7250ddd659db77",
        "type": "mqtt out",
        "z": "790abfecdef18970",
        "name": "Update Briefkasten MinInterval",
        "topic": "/DoorAssistant/Briefkasten/Settings/MinInterval",
        "qos": "2",
        "retain": "true",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "6bccc9f8e5419fdf",
        "x": 490,
        "y": 820,
        "wires": []
    },
    {
        "id": "466b41fb04881228",
        "type": "link out",
        "z": "790abfecdef18970",
        "name": "doorIntervalSwitch",
        "links": [
            "ea96eca2947b5c20"
        ],
        "x": 1335,
        "y": 280,
        "wires": []
    },
    {
        "id": "173705713ad1bcc8",
        "type": "function",
        "z": "5fffdd7bd03e62e5",
        "name": "interval-GATE",
        "func": "var lastOpenTime = context.get(\"lastOpenTime\");\nvar lastCloseTime = context.get(\"lastCloseTime\");\nvar minInterval = context.get(\"minInterval\");\nvar now = Date.now();\n\nif(msg.topic === \"doorIntervalSwitch\"){\n    context.set(\"minInterval\", msg.payload * 1000);\n    return null;\n}else{\n    if(msg.payload === 0){\n        if((now - minInterval) >= lastOpenTime){\n            context.set(\"lastOpenTime\", now);\n            return msg;\n        }\n        return null;\n    }else if(msg.payload === 1){\n        if((now - minInterval) >= lastCloseTime){\n            context.set(\"lastCloseTime\", now);\n            return msg;\n        }\n        return null;\n    }\n    return null;\n}",
        "outputs": 1,
        "noerr": 0,
        "initialize": "// Code added here will be run once\n// whenever the node is started.\ncontext.set(\"lastOpenTime\", 0);\ncontext.set(\"lastCloseTime\", 0);\ncontext.set(\"minInterval\", 1000);",
        "finalize": "",
        "libs": [],
        "x": 620,
        "y": 1240,
        "wires": [
            [
                "43db9962062a2063"
            ]
        ],
        "icon": "font-awesome/fa-clock-o"
    },
    {
        "id": "ea96eca2947b5c20",
        "type": "link in",
        "z": "5fffdd7bd03e62e5",
        "name": "",
        "links": [
            "466b41fb04881228"
        ],
        "x": 475,
        "y": 1200,
        "wires": [
            [
                "173705713ad1bcc8"
            ]
        ],
        "icon": "font-awesome/fa-clock-o"
    },
    {
        "id": "3978547a309e55df",
        "type": "function",
        "z": "790abfecdef18970",
        "name": "reverse",
        "func": "msg.payload.reverse();\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 1000,
        "y": 1020,
        "wires": [
            [
                "0eaa81b6bfe5deed"
            ]
        ]
    },
    {
        "id": "fdc8e74ba7a57ffb",
        "type": "ui_text_input",
        "z": "790abfecdef18970",
        "name": "",
        "label": "Display Text",
        "tooltip": "Auf dem Display anzuzeigender Text",
        "group": "f6471c0a62158f36",
        "order": 8,
        "width": 0,
        "height": 0,
        "passthru": true,
        "mode": "text",
        "delay": "2000",
        "topic": "topic",
        "topicType": "msg",
        "x": 250,
        "y": 480,
        "wires": [
            [
                "ab5a2c3ce43c6ba2"
            ]
        ]
    },
    {
        "id": "e57f21d0ef59fa8d",
        "type": "ui_toast",
        "z": "790abfecdef18970",
        "position": "top right",
        "displayTime": "5",
        "highlight": "RED",
        "sendall": true,
        "outputs": 0,
        "ok": "OK",
        "cancel": "",
        "raw": false,
        "topic": "",
        "name": "show error",
        "x": 670,
        "y": 460,
        "wires": []
    },
    {
        "id": "ab5a2c3ce43c6ba2",
        "type": "function",
        "z": "790abfecdef18970",
        "name": "LengthCheck",
        "func": "var DISPLAY_SIZE = 2 * 16;\n\nif(msg.payload.length <= DISPLAY_SIZE){\n    return [null, msg];\n}\nmsg.payload = \"Die Nachricht ist zu lang (maximal \" + DISPLAY_SIZE + \" Zeichen)\";\nreturn [msg, null];",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 430,
        "y": 480,
        "wires": [
            [
                "e57f21d0ef59fa8d"
            ],
            [
                "45e186136cd9eaa2"
            ]
        ]
    },
    {
        "id": "45e186136cd9eaa2",
        "type": "mqtt out",
        "z": "790abfecdef18970",
        "name": "Update Display Text",
        "topic": "/DoorAssistant/Klingel/Display/Text",
        "qos": "2",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "6bccc9f8e5419fdf",
        "x": 700,
        "y": 520,
        "wires": []
    },
    {
        "id": "df1d2302dc2ca7fd",
        "type": "mqtt out",
        "z": "ba5dcfac39603564",
        "name": "Update Display Text",
        "topic": "/DoorAssistant/Klingel/Display/Text",
        "qos": "2",
        "retain": "false",
        "respTopic": "",
        "contentType": "",
        "userProps": "",
        "correl": "",
        "expiry": "",
        "broker": "6bccc9f8e5419fdf",
        "x": 840,
        "y": 260,
        "wires": []
    },
    {
        "id": "f33aea4c0d94c92f",
        "type": "discordSendMessage",
        "z": "ba5dcfac39603564",
        "name": "[!] discordSendMessage",
        "channel": "",
        "token": "256e7266680380a8",
        "x": 790,
        "y": 460,
        "wires": []
    },
    {
        "id": "20af0e218ea2c8f0",
        "type": "discordMessage",
        "z": "ba5dcfac39603564",
        "name": "[!] discord receiver",
        "token": "256e7266680380a8",
        "x": 190,
        "y": 400,
        "wires": [
            [
                "5ef720ca8f3ef44d"
            ]
        ]
    },
    {
        "id": "5ef720ca8f3ef44d",
        "type": "function",
        "z": "ba5dcfac39603564",
        "name": "filter",
        "func": "if(msg.channel.type === \"dm\"){\n    return msg;\n} else if(msg.channel.type === \"text\" && msg.channel.name === \"doorassistant-notifications\") {\n   return msg; \n}\nreturn null;\n\n",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 370,
        "y": 400,
        "wires": [
            [
                "613ea39f9014f2a6"
            ]
        ]
    },
    {
        "id": "b068750d4e5a0cea",
        "type": "function",
        "z": "ba5dcfac39603564",
        "name": "[!] Configure Discord ChannelID",
        "func": "// CHANGE ME\nvar CHANNEL_ID = \"884465858485841944\";\n\nmsg.channel = CHANNEL_ID;\nreturn msg;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 510,
        "y": 460,
        "wires": [
            [
                "f33aea4c0d94c92f"
            ]
        ],
        "icon": "node-red/alert.svg"
    },
    {
        "id": "613ea39f9014f2a6",
        "type": "function",
        "z": "ba5dcfac39603564",
        "name": "handleMessage",
        "func": "// Out1: Discord Message, Out2: MQTT Display Update\nvar DISPLAY_SIZE = 2 * 16;\n\nif(msg.payload === \"/info\"){\n    return [{\n        \"channel\": msg.channel.id,\n        \"payload\": \"Channel ID: \" + msg.channel.id\n    }, null];\n}\n\nif(msg.payload.startsWith(\"/send \")){\n    var text = msg.payload.replace(\"/send \", \"\");\n    \n    if(text.length <= DISPLAY_SIZE){\n        return [{\n            \"channel\": msg.channel.id,\n            \"payload\": \"Nachricht an Display geschickt.\"\n        },\n        {\n            \"topic\": \"sendMQTTMessage\",\n            \"payload\": text\n        }];\n    }else{\n        return [{\n            \"channel\": msg.channel.id,\n            \"payload\": \"Nachricht zu lang, maximal \" + DISPLAY_SIZE + \" Zeichen\"\n        }, null];\n    }\n}\n\nreturn null;",
        "outputs": 2,
        "noerr": 0,
        "initialize": "",
        "finalize": "",
        "libs": [],
        "x": 540,
        "y": 400,
        "wires": [
            [
                "f33aea4c0d94c92f"
            ],
            [
                "df1d2302dc2ca7fd"
            ]
        ],
        "icon": "node-red-contrib-discord/discord.png"
    },
    {
        "id": "3457abe61f31a497",
        "type": "function",
        "z": "ba5dcfac39603564",
        "name": "[!] Notification-Texte",
        "func": "// CHECK \"ON START\" TAB\nreturn null;",
        "outputs": 1,
        "noerr": 0,
        "initialize": "// CHANGE US\nvar TEXT_KLINGEL = \"Jemand hat geklingelt!\";\nvar TEXT_POST = \"Es wurde Post eingeworfen.\";\nvar TEXT_TUER_OFFEN = \"Die Haustür wurde geöffnet.\";\nvar TEXT_TUER_GESCHLOSSEN = \"Die Haustür wurde geschlossen.\";\n\nglobal.set(\"str_klingel\", TEXT_KLINGEL);\nglobal.set(\"str_post\", TEXT_POST);\nglobal.set(\"str_door_open\", TEXT_TUER_OFFEN);\nglobal.set(\"str_door_close\", TEXT_TUER_GESCHLOSSEN);",
        "finalize": "",
        "libs": [],
        "x": 330,
        "y": 80,
        "wires": [
            []
        ],
        "icon": "node-red/alert.svg"
    }
]